[TOC]



### 一、交换机配置模式

1. 用户模式

   > `Switch>`

2. 特权模式

   >`Switch>`enable
   >`Switch#`

3. 全局配置模式

   >`Switch>`enable
   >
   >`Switch#`config terminal
   >`Switch(config)#`

4. 接口配置模式

   >`Switch>`enable
   >
   >`Switch#`config terminal
   >
   >`Switch(config)#`interface f0/1
   >`Switch(config-if)#`

5. Line模式

   >`Switch>`enable
   >
   >`Switch#`config terminal
   >
   >`Switch(config)#`line console 0
   >`Switch(config-line)#`

   

### 二、交换机基本配置

1. 配置主机名

   >`Switch>`enable
>`Switch#`config terminal
   >`Switch(config)#`hostname mj
>
   >`mj(config)#`

2. 查看交换机配置

   >`Switch>`enable
   >
   >`Switch#`show running-config 
   >
   >> `特权模式下可以简写为`show run

3. 配置使能口令(特权模式密码)

   >`Switch>`enable
   >
   >`Switch#`enable password ***
   >
   ><!--*为密码，默认明文存储，使用show run可以查看-->

4. 加密使能口令

   > `Switch>`enable
   >
   > `Switch#`enable secret ***
   >
   > <!--加密后将不能通过show run查看-->

5. 配置IP地址

   > `Switch>`enable
   >
   > `Switch#`config terminal
   >
   > `Switch(config)#`interface vlan1
   >
   > `Switch(config-if)#`ip address 192.168.1.1 255.255.255.0
   >
   > `Switch(config-if)#`no shutdown

6. 配置交换机网关

   > `Switch>`enable
   >
   > `Switch#`config terminal
   >
   > `Switch(config)#`ip default-gateway 192.168.1.10
   >
   > <!--与交换机不在同一网段时，需要通过配置网关进行远程连接-->

7. 查看交换机MAC地址列表

   > `Switch>`enable
   >
   > `Switch#`show mac-address-table

8. 保存交换机配置

   > `Switch>`enable
   >
   > `Switch#`write
   >
   > <!--也可以使用copy running-config startup-config与write效果一致-->

9. 恢复交换机出厂设置

   > `Switch>`enable
   >
   > `Switch#`erase startup-config

10. 创建静态VLAN

    > 方法1：在全局模式下创建
    >
    > > `Switch>`enable
    > >
    > > `Switch#`config terminal
    > >
    > > `Switch(config)#`vlan 20
    > >
    > > `Switch(config-vlan)#`name test20
    > >
    > > `Switch(config-vlan)#`end
    >
    > 方法2：在VLAN数据库中创建
    >
    > > `Switch>`enable
    > >
    > > `Switch#`vlan database
    > >
    > > `Switch(vlan)#`vlan 20 name test20
    > >
    > > `Switch(vlan)#`exit

11. 删除VLAN

    > 方法1：在全局模式下删除
    >
    > > `Switch>`enable
    > >
    > > `Switch#`config terminal
    > >
    > > `Switch(config)#`no vlan 20
    > >
    > > `Switch(config-vlan)#`end
    >
    > 方法2：在VLAN数据库中删除
    >
    > > `Switch>`enable
    > >
    > > `Switch#`vlan database
    > >
    > > `Switch(vlan)#`no vlan 20
    > >
    > > `Switch(vlan)#`exit

12. 在VLAN中添加、删除端口

    > 将一个交换机端口分配到VLAN中
    >
    > > `Switch>`enable
    > >
    > > `Switch#`config terminal
    > >
    > > `Switch(config)#`interface fastethernet0/1
    > >
    > > `Switch(config-if)#`Switchport mode access
    > >
    > > `Switch(config-if)#`Switchport access vlan 2
    > >
    > > `Switch(config-if)#`end
    > >
    > > `Switch(config-if)#`show running-config interface 0/1<!--验证端口的VLAN号-->
    > >
    > > `Switch(config-if)#`show interfaces 0/1 Switch port<!--验证端口管理模式和VLAN情况-->
    > >
    > > <!--可以使用default interface 0/1还原接口到默认配置状态-->
    >
    > 验证VLAN配置
    >
    > > `Switch>`enable
    > >
    > > `Switch#`show vlan brief
    > >
    > > <!--查看某个VLAN的信息：show vlan id-->*vlan-id*
    >
    > 创建新VlAN，并将交换机的多个端口，批量添加到新VLAN中
    >
    > > `Switch>`enable
    > >
    > > `Switch#`Vlan database
    > >
    > > `Switch(vlan)#`vlan 2 name v2
    > >
    > > `Switch(vlan)#`exit
    > >
    > > `Switch#`interface terminal
    > >
    > > `Switch(config)#`interface range f0/5 - 10
    > >
    > > `Switch(config-if-range)#`switchport access vlan 2
    > >
    > > `Switch#`show vlan brief

13. 交换机命令历史缓存查看

    > show history
    >
    > <!--按↑↓键查看；可以通过history size设置缓存数量，默认缓存10条-->



### 三、动态VLAN

1. 基于MAC地址的动态VLAN

   > https://wenku.baidu.com/view/19afc2f54693daef5ef73d0e.html

2. 基于用户名的动态VLAN

   > 暂无



### 四、配置VLAN Trunk

1. 配置VLAN Trunk

   > <!--配置交换机之间互联的端口为trunk模式，两个交换机都通过各自的f0/24端口连接-->
   >
   > SW1(交换机1)
   >
   > > `SW1(config)#`interface f0/24
   > >
   > > `SW1(config-if)#`switchport mode trunk
   > >
   > > `SW1#`show interface f0/24 switchport<!--配置后使用show命令验证-->
   >
   > SW2(交换机2)
   >
   > > `SW2(config)#`interface f0/24
   > >
   > > `SW2(config-if)#`switchport mode trunk
   > >
   > > `SW2#`show interface f0/24 switchport<!--配置后使用show命令验证-->

2. 在Trunk上移除VLAN

   > <!--不需要在Trunk上传输某个VLAN的数据，就可以将对应的VLAN移除-->
   >
   > `SW1(config)#`interface f0/24
   >
   > `SW1(config-if)#`switchport trunk allowed vlan remove 2
   >
   > `SW1(config-if)#`end
   >
   > `SW1#`show interface f0/24 switchport<!--验证移除成功-->

